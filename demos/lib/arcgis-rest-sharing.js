var arcgis_rest_sharing=function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="",e(e.s=1)}([function(t,r,e){"use strict";e.r(r);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])};var o=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t};function u(t){return Object.keys(t).some(function(r){var e=t[r];if(!e)return!1;switch(e.constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}})}function a(t){var r={};return Object.keys(t).forEach(function(e){var n=t[e];if(n||0===n||"boolean"==typeof n||"string"==typeof n){var o;switch(n.constructor.name){case"Array":o=n[0]&&n[0].constructor&&"Object"===n[0].constructor.name?JSON.stringify(n):n.join(",");break;case"Object":o=JSON.stringify(n);break;case"Date":o=n.valueOf();break;case"Function":o=null;break;case"Boolean":o=n+"";break;default:o=n}(o||0===o||"string"==typeof o)&&(r[e]=o)}}),r}function i(t,r){return encodeURIComponent(t)+"="+encodeURIComponent(r)}function c(t){var r=a(t);return Object.keys(r).map(function(t){return i(t,r[t])}).join("&")}function s(t){var r=u(t),e=a(t);if(r){var n=new FormData;return Object.keys(e).forEach(function(t){if("undefined"!=typeof Blob&&e[t]instanceof Blob){var r=e.fileName||e[t].name||t;n.append(t,e[t],r)}else n.append(t,e[t])}),n}return c(t)}var f=function(){return function(t,r,e,n,o){t=t||"UNKNOWN_ERROR",r=r||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===r?t:r+": "+t,this.originalMessage=t,this.code=r,this.response=e,this.url=n,this.options=o}}();function p(t,r){void 0===r&&(r={params:{f:"json"}});var e=o({httpMethod:"POST"},r),n=[],a=[];if(e.fetch||"undefined"==typeof fetch?(n.push("`fetch`"),a.push("`isomorphic-fetch`")):e.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(n.push("`Promise`"),a.push("`es6-promise`")),"undefined"==typeof FormData&&(n.push("`FormData`"),a.push("`isomorphic-form-data`")),!e.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires global variables for `fetch`, `Promise` and `FormData` to be present in the global scope. You are missing "+n.join(", ")+". We recommend installing the "+a.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var i=e.httpMethod,p=e.authentication,h=o({f:"json"},r.params),d={method:i,credentials:"same-origin"};return(p?p.getToken(t,{fetch:e.fetch}):Promise.resolve("")).then(function(r){if(r.length&&(h.token=r),"GET"===d.method){var n=""===c(h)?t:t+"?"+c(h);e.maxUrlLength&&n.length>e.maxUrlLength?d.method="POST":t=n}return"POST"===d.method&&(d.body=s(h)),d.headers={},"undefined"==typeof window&&(d.headers.referer="@esri/arcgis-rest"),u(h)||(d.headers["Content-Type"]="application/x-www-form-urlencoded"),e.fetch(t,d)}).then(function(r){if(!r.ok){var n=r.status,o=r.statusText;throw new f(o,"HTTP "+n,r,t,e)}switch(h.f){case"json":case"geojson":return r.json();case"html":case"text":return r.text();default:return r.blob()}}).then(function(r){return"json"===h.f||"geojson"===h.f?l(r,t,h,e):r})}f.prototype=Object.create(Error.prototype),f.prototype.constructor=f;var h,d=function(t){function r(r,e,n,o,u){void 0===r&&(r="AUTHENTICATION_ERROR"),void 0===e&&(e="AUTHENTICATION_ERROR_CODE");var a=t.call(this,r,e,n,o,u)||this;return a.name="ArcGISAuthError",a.message="AUTHENTICATION_ERROR_CODE"===e?r:e+": "+r,a}return function(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(r,t),r.prototype.retry=function(t,r){var e=this;void 0===r&&(r=3);var n=0,u=function(a,i){t(e.url,e.options).then(function(t){var r=o({},e.options,{authentication:t});return n+=1,p(e.url,r)}).then(function(t){a(t)}).catch(function(t){"ArcGISAuthError"===t.name&&n<r?u(a,i):"ArcGISAuthError"===t.name&&n>=r?i(e):i(t)})};return new Promise(function(t,r){u(t,r)})},r}(f);function l(t,r,e,n){if(t.code>=400){var o=t.message,u=t.code;throw new f(o,u,t,r,n)}if(t.error){var a=t.error,i=(o=a.message,u=a.code,a.messageCode),c=i||u||"UNKNOWN_ERROR_CODE";if(498===u||499===u||"GWM_0003"===i)throw new d(o,c,t,r,n);throw new f(o,c,t,r,n)}if("failed"===t.status||"failure"===t.status){o=void 0,u="UNKNOWN_ERROR_CODE";try{o=JSON.parse(t.statusMessage).message,u=JSON.parse(t.statusMessage).code}catch(r){o=t.statusMessage||t.message}throw new f(o,u,t,r,n)}return t}function m(t){console&&console.warn&&console.warn.apply(console,[t])}function g(t){return"/"===(t=t.trim())[t.length-1]&&(t=t.slice(0,-1)),t}function b(t){return void 0===t&&(t={}),t.portal?g(t.portal):t.authentication?t.authentication.portal:"https://www.arcgis.com/sharing/rest"}function O(t){return y(null,t)}function y(t,r){var e=t||"self";return p(b(r)+"/portals/"+e,o({httpMethod:"GET"},r))}function v(t,r){Object.keys(t).forEach(function(e){"url"!==e&&"params"!==e&&"authentication"!==e&&"httpMethod"!==e&&"fetch"!==e&&"portal"!==e&&"maxUrlLength"!==e&&"endpoint"!==e&&"decodeValues"!==e&&(r.params[e]=t[e])})}!function(t){t.ArcGISRequestError="ArcGISRequestError",t.ArcGISAuthError="ArcGISAuthError"}(h||(h={})),e.d(r,"request",function(){return p}),e.d(r,"ArcGISAuthError",function(){return d}),e.d(r,"checkForErrors",function(){return l}),e.d(r,"encodeFormData",function(){return s}),e.d(r,"encodeParam",function(){return i}),e.d(r,"encodeQueryString",function(){return c}),e.d(r,"warn",function(){return m}),e.d(r,"ArcGISRequestError",function(){return f}),e.d(r,"ErrorTypes",function(){return h}),e.d(r,"requiresFormData",function(){return u}),e.d(r,"processParams",function(){return a}),e.d(r,"getSelf",function(){return O}),e.d(r,"getPortal",function(){return y}),e.d(r,"getPortalUrl",function(){return b}),e.d(r,"appendCustomParams",function(){return v}),e.d(r,"cleanUrl",function(){return g})},function(t,r,e){
/* @preserve
* @esri/arcgis-rest-sharing - v1.14.4 - Apache-2.0
* Copyright (c) 2017-2019 Esri, Inc.
* Sun Jan 20 2019 10:58:45 GMT-0800 (Pacific Standard Time)
*/
!function(t,r,e){"use strict";var n=function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function o(t){return t.authentication.getUser(t).then(function(t){return!(!t||"org_admin"!==t.role)})}function u(t,e){return e.params=n({org:!1,everyone:!1},e.params),"private"===e.access&&(e.params.groups=" "),"org"===e.access&&(e.params.org=!0),"public"===e.access&&(e.params.org=!0,e.params.everyone=!0),r.request(t,e)}function a(t){var u=t.authentication.username,a=t.owner||u;return o(t).then(function(o){var i="share"===t.action?"notSharedWith":"notUnsharedFrom";return function(t){var e={q:"id: "+t.id+" AND group: "+t.groupId,start:1,num:10,sortField:"title"},o=n({},t);o.params=n({},e,t.params);var u=r.getPortalUrl(o)+"/search";return r.request(u,o).then(function(r){return 0!==r.total&&(r.results.some(function(r){var n=r.id===t.id;return n&&(e=r),n}),!!e);var e})}(t).then(function(n){if("share"===t.action&&!0===n||"unshare"===t.action&&!1===n){var c={itemId:t.id,shortcut:!0};return c[i]=[],c}return function(t){return e.getGroup(t.groupId,t).then(function(t){return t.userMembership.memberType}).catch(function(){return"nonmember"})}(t).then(function(e){if("nonmember"===e)throw Error("This item can not be "+t.action+"d by "+u+" as they are not a member of the specified group "+t.groupId+".");if(a===u||o)return r.getPortalUrl(t)+"/content/users/"+a+"/items/"+t.id+"/"+t.action;if("admin"===e||"owner"===e)return r.getPortalUrl(t)+"/content/items/"+t.id+"/"+t.action;throw Error("This item can not be "+t.action+"d by "+u+" as they are neither the owner, a groupAdmin of "+t.groupId+", nor an org_admin.")}).then(function(e){return t.params={groups:t.groupId,confirmItemControl:t.confirmItemControl},r.request(e,t)}).then(function(r){if(r[i].length)throw Error("Item "+t.id+" could not be "+t.action+"d to group "+t.groupId+".");return r})})})}t.setItemAccess=function(t){var e=function(t){var e=t.authentication.username,n=t.owner||e;return r.getPortalUrl(t)+"/content/users/"+encodeURIComponent(n)+"/items/"+t.id+"/share"}(t);return function(t){var r=t.authentication.username;return(t.owner||r)===r}(t)?u(e,t):o(t).then(function(r){if(r)return u(e,t);throw Error("This item can not be shared by "+t.authentication.username+". They are neither the item owner nor an organization admin.")})},t.shareItemWithGroup=function(t){return a(n({action:"share"},t))},t.unshareItemWithGroup=function(t){return a(n({action:"unshare"},t))},Object.defineProperty(t,"__esModule",{value:!0})}(r,e(0),e(2))},function(t,r,e){"use strict";e.r(r);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
Object.setPrototypeOf||Array;var n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t};var o=e(0);function u(t){var r=JSON.parse(JSON.stringify(t)),e=t.tags,n=void 0===e?[]:e;return r.tags=n.join(", "),r}function a(t){var r=Object(o.getPortalUrl)(t)+"/community/createGroup",e=n({},t);return e.params=u(t.group),Object(o.request)(r,e)}function i(t,r){var e=Object(o.getPortalUrl)(r)+"/community/groups/"+t,u=n({httpMethod:"GET"},r);return Object(o.request)(e,u)}function c(t,r){var e=Object(o.getPortalUrl)(r)+"/content/groups/"+t,u=n({httpMethod:"GET"},{params:{start:1,num:100}},r);return r&&r.paging&&(u.params=n({},r.paging)),Object(o.request)(e,u)}function s(t,r){var e=Object(o.getPortalUrl)(r)+"/community/groups/"+t+"/users",u=n({httpMethod:"GET"},r);return Object(o.request)(e,u)}function f(t){var r=Object(o.getPortalUrl)(t)+"/community/groups/"+t.id+"/createNotification",e=n({params:n({subject:t.subject,message:t.message,users:t.users,notificationChannelType:t.notificationChannelType||"email",clientId:t.clientId,silentNotification:t.silentNotification,notifyAll:!t.users||0===t.users.length},t.params)},t);return Object(o.request)(r,e)}function p(t){var r=Object(o.getPortalUrl)(t)+"/community/groups/"+t.id+"/protect",e=n({},t);return Object(o.request)(r,e)}function h(t){var r=Object(o.getPortalUrl)(t)+"/community/groups/"+t.id+"/unprotect",e=n({},t);return Object(o.request)(r,e)}function d(t){var r=Object(o.getPortalUrl)(t)+"/community/groups/"+t.id+"/delete",e=n({},t);return Object(o.request)(r,e)}function l(t,r){var e=Object(o.getPortalUrl)(r)+"/community/groups",u=n({httpMethod:"GET"},r);return u.params=n({},t),Object(o.request)(e,u)}function m(t){var r=Object(o.getPortalUrl)(t)+"/community/groups/"+t.group.id+"/update",e=n({},t);return e.params=u(t.group),Object(o.request)(r,e)}e.d(r,"createGroup",function(){return a}),e.d(r,"getGroup",function(){return i}),e.d(r,"getGroupContent",function(){return c}),e.d(r,"getGroupUsers",function(){return s}),e.d(r,"serializeGroup",function(){return u}),e.d(r,"createGroupNotification",function(){return f}),e.d(r,"protectGroup",function(){return p}),e.d(r,"unprotectGroup",function(){return h}),e.d(r,"removeGroup",function(){return d}),e.d(r,"searchGroups",function(){return l}),e.d(r,"updateGroup",function(){return m})}]);